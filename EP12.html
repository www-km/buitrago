<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor M3U8</title>
    <link rel="stylesheet" href="epstyle.css"> <!-- Aseg√∫rate de que la ruta sea correcta -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="player.js"></script>
</head>
<body class="m3u8">
    <div class="advertisement" id="advertisement">
        <video id="adVideo" width="640" height="360" controls>
        Tu navegador no soporta el video.
    </video>
        <p>¬°Mira este anuncio antes de comenzar el video!</p>
        <button class="close-ad" onclick="closeAd()">Cerrar Anuncio</button>
    </div>

    <h1>Episodio 12 Final</h1>
    <!-- Contenedor para la descripci√≥n del video -->
    <div class="description">
        <h2>Descripci√≥n del Episodio</h2>
        <p>Aqu√≠ puedes agregar una descripci√≥n detallada del episodio. Este texto puede ser muy extenso, por lo que el contenedor tendr√° un scroll si el texto excede la altura m√°xima. ¬°Disfruta del video!</p>
    </div>
    
    <video id="video" controls></video>
    
    <div class="controls">
        <button onclick="location.href='EP11.html'">‚¨ÖÔ∏è</button>
        <button onclick="location.href='index.html'">üè†</button>
        <button onclick="location.href='naze boku.html'">üìã</button>
        <button onclick="location.href='EP13.html'" disabled>‚û°Ô∏è</button>
    </div>

    <script>
        // URLs de los videos de anuncios
        const adUrls = [
            '',
            'URL_2_aqu√≠',
            'URL_3_aqu√≠',
            'URL_4_aqu√≠',
            'URL_5_aqu√≠'
        ];

        // Selecciona una URL aleatoria de los videos de anuncios
        function getRandomAdUrl() {
            const randomIndex = Math.floor(Math.random() * adUrls.length);
            return adUrls[randomIndex];
        }

        // Llama a la funci√≥n initializePlayer con la URL M3U8
        function initializePlayer(videoId, videoUrl) {
            const video = document.getElementById(videoId);
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(videoUrl);
                hls.attachMedia(video);
            }
        }

        function closeAd() {
            var adVideo = document.getElementById("adVideo");
            adVideo.pause(); // Pausar el video del anuncio
            document.getElementById("advertisement").style.display = "none"; // Ocultar anuncio
            document.getElementById("video").style.display = "block"; // Mostrar video
            initializePlayer('video', 'https://moodle1.playmudos.com/NDFBM3VNQ1RiVkJpV0ovajFWbGhCeHBtQW9KTUxSU2JXT3lzQTl4cWR2bFhQOW1sekMrYVlRZWxaUUVtVVFnMg.m3u8');
        }

        // Inicializa el video del anuncio con una URL aleatoria
        window.onload = function() {
            document.getElementById("adVideo").src = getRandomAdUrl();
        }
    </script>
</body>
</html>
